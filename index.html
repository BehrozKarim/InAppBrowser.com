<head>
    <meta name="viewport" content="user-scalable=no, width=device-width">
</head>
<h1>Test Website</h1>
<!-- <span id="iab-pcm-sdk" /> -->

<ol id="res"></ol>

<script type="text/javascript">
    const res = document.getElementById("res")

    const originalCreateElement = document.createElement
    document.createElement = function(a) {
        res.innerHTML += "<li>createElement => " + a + " (" + this + "-" + arguments + ")</li>"
        let fakeResponse = originalCreateElement.apply(this, arguments)
        fakeResponse.setAttribute = function(k, v) {
            res.innerHTML += "<li>fakeResponse/createElement setAttribute => " + k + "=" + v + "</li>"
        }
        fakeResponse.appendChild = function(c) {
            res.innerHTML += "<li>fakeResponse/createElement appendChild => " + c + "</li>"
        }
        fakeResponse.insertBefore = function(c, b) {
            res.innerHTML += "<li>fakeResponse/createElement insertBefore => " + c + " before " + b + "</li>"
        }
        fakeResponse.innerHTML = function(v) {
            res.innerHTML += "<li>fakeResponse/createElement innerHTML => " + v + "</li>"
        }
        Object.defineProperty(fakeResponse, "src", {
            get: function() {
                res.innerHTML += "<li>fakeResponse/createElement get</li>"
                return typeof bar !== "undefined" ? bar : proto.bar;
            },
            set: function(value) {
                res.innerHTML += "<li>fakeResponse/createElement set => " + value + "</li>"
                bar = value;
            }
        });
        fakeResponse.innerText = function(v) {
            res.innerHTML += "<li>fakeResponse/createElement innerText => " + v + "</li>"
        }
        return fakeResponse
    }
    const originalGetElementById = document.getElementById
    document.getElementById = function(a, b) {
        res.innerHTML += "<li>getElementById  =>  " + a + "</li>"
        return originalGetElementById.apply(this, arguments);
    }

    const originalGetElement = document.getElementsByTagName
    document.getElementsByTagName = function(a, b) {
        res.innerHTML += "<li>getElementsByTagName => " + a + "</li>"
        const fakeFrame = originalCreateElement.apply(this, arguments);
        Object.defineProperty(fakeFrame, "src", {
            get: function() {
                res.innerHTML += "<li>fakeResponse/createElement get</li>"
                return typeof bar !== "undefined" ? bar : proto.bar;
            },
            set: function(value) {
                res.innerHTML += "<li>fakeResponse/createElement set => " + value + "</li>"
                bar = value;
            }
        });
        let fakeResponse = [fakeFrame]
        return fakeResponse;
    }
</script>

<style type="text/css">
    body {
        background-color: #f0f0f0;
        font-family: sans-serif;
    }
    
    h1 {
        font-size: 1.5em;
    }
    
    ol {
        border: 1px solid #ccc;
        padding-left: 40px;
        padding-right: 40px;
        padding-top: 15px;
        padding-bottom: 10px;
    }
    
    ol>li {
        margin-bottom: 0.5em;
    }
</style>